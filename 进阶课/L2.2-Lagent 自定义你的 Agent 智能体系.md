# 书生·浦语大模型全链路开源体系
参考资料：https://github.com/InternLM/Tutorial/blob/camp3/docs/L2/Lagent/readme.md

## 1 Lagent 介绍
Lagent 是一个轻量级开源智能体框架，旨在让用户可以高效地构建基于大语言模型的智能体。同时它也提供了一些典型工具以增强大语言模型的能力。
Lagent 目前已经支持了包括 AutoGPT、ReAct 等在内的多个经典智能体范式，也支持了Google 搜索、Google 学术搜索、Arxiv 搜索、Bing 地图、Python 解释器、PPT等tools。
其基本结构如下所示：
![alt text](img1/Lagent基本结构.png)

## 2 Lagent Web Demo
### 2.1 基础环境配置
```bash
# 创建环境
conda create -n agent_camp3 python=3.10 -y
# 激活环境
conda activate agent_camp3
# 安装 torch
conda install pytorch==2.1.2 torchvision==0.16.2 torchaudio==2.1.2 pytorch-cuda=12.1 -c pytorch -c nvidia -y
# 安装其他依赖包
pip install termcolor==2.4.0
pip install lmdeploy==0.5.2
```
### 2.2 源码安装的方式安装 lagent
- 切换路径到 /root/code 克隆 lagent 仓库，并通过 pip install -e . 源码安装 Lagent
```bash
cd /root/code
git clone https://gitee.com/internlm/lagent.git
cd /root/code/lagent
git checkout 511b03889010c4811b1701abb153e02b8e94fb5e # 尽量保证和教程commit版本一致
pip install -e . # 源码安装
```
- 修改代码
由于代码修改的地方比较多，参考：https://github.com/InternLM/tutorial/blob/camp1/helloworld/hello_world.md#34-%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81  
- Demo运行
```bash
streamlit run /root/code/lagent/examples/react_web_demo.py --server.address 127.0.0.1 --server.port 6006
```
将6006端口映射到本地。在本地浏览器输入 http://127.0.0.1:6006 即可体验 Lagent 智能体工具调用 Demo。运行结果：
![alt text](img2/Lagent%20智能体工具调用%20Demo运行结果.png)

### 2.3 

## 3 基于 Lagent 自定义智能体
官方文档：https://lagent.readthedocs.io/zh-cn/latest/tutorials/action.html
### 3.1 conda环境
- conda create -n xinference python=3.10  #创建虚拟环境
- bash  #进入bash shells
- conda activate xinference  #激活虚拟环境
- conda deactivate  #退出虚拟环境
- conda remove -n xinference --all  #删除虚拟环境
- conda env list
- nvidia-smi  #显卡运行情况查看

## 4 作业 - 基础任务
使用 Lagent 自定义一个智能体，并使用 Lagent Web Demo 成功部署与调用，记录复现过程并截图。

